# Learning1

NodeJS Learning

Кейс:

Нужно сделать через TDD мультипровайдерный модуль авторизации:

Типы кодогенерации:
CODE_FIRST - генерим 5 значный код в логике и отправляем клиенту через провайдера
SEND_FIRST - отправляем запрос на код провайдеру с номером клиента, в ответе получаем 6значный код

Провайдеры:

1. Таксометр (CODE_FIRST)
2. Бот телеграм (CODE_FIRST)
3. Голосовой звонок (SEND_FIRST)
4. Смс (CODE_FIRST)

Код валиден в течении 1 часа после отправки
Модуль должен хранить состояние на каждого клиента в виде сессии привязанной к рандомному хэшу (пока тупо в массиве в памяти храним, на проде в бд будем)
У каждой сессии не более 5 попыток ввода кода (защита от брутфорс)

Пример 1 (Юзер авторизуется в мобильном приложении):
Отправляем код в П1, в ответ отдаем юзеру токен сессии, когда юзер введет полученный код, он также должен предьявить сессию
Но оказывается у него нет возможности получить код через П1,
На мобилке он жмет «У меня нет доступа к таксометру» и видит альтернативные способы авторизации, тыкает любой из них код опять отправляется, отдаем в ответе туже самую сессию.
